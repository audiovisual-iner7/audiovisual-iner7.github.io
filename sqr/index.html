<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de QR Personalizado</title>
  
  <link rel="stylesheet" href="style.css">
  
  <script src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
</head>

<body>

  <div class="container">
    <h2>Tu Generador de QR Personalizado</h2>
    
    <div class="input-group">
      <input type="text" id="url-input" value="https://google.com">
      <button id="generate-btn">Generar QR</button>
    </div>

    <div id="canvas-qr"></div>
  </div>


  <script>
    // --- ESTA PARTE SIGUE SIENDO JAVASCRIPT ---

    // 1. Configuración inicial del QR
    const qrCode = new QRCodeStyling({
      width: 300,
      height: 300,
      image: "img/imagen.jpg", // Asegúrate que tu logo esté en la misma carpeta
      imageOptions: {
        crossOrigin: "anonymous",
        margin: 10 
      },
      dotsOptions: {
        color: "#4A148C", // Color por defecto
        type: "rounded"
      },
      backgroundOptions: {
        color: "#FFFFFF",
      },
      qrOptions: {
        errorCorrectionLevel: "H"
      }
    });

    // 2. Función para generar o actualizar el QR
    function generarQR() {
      const canvas = document.getElementById("canvas-qr");
      if (!canvas) {
        console.error("No se encontró el elemento #canvas-qr");
        return;
      }
      
      canvas.innerHTML = ""; // Limpia el contenedor

      let url = document.getElementById("url-input").value;
      if (!url) {
        alert("Por favor, introduce una URL");
        return;
      }
      
      qrCode.update({ data: url });
      qrCode.append(canvas);
    }

    // 3. Asigna la función al botón y genera el primero
    document.getElementById("generate-btn").addEventListener("click", generarQR);
    
    // Genera el QR inicial al cargar la página
    window.addEventListener("load", generarQR);

  </script>

</body>
</html>